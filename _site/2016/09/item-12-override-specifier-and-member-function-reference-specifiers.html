<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Cowboybebop's Notes</title>
  <meta name="theme-color" content="#222222" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://xiongm.github.io/js/jquery.min.js"></script>
  <script src="https://xiongm.github.io/js/bootstrap.min.js"></script>
  <script src="https://xiongm.github.io/js/header.js"></script>
  <script src="https://xiongm.github.io/js/toc.js"></script>
  <link href="https://xiongm.github.io/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://xiongm.github.io/css/theme.css" rel="stylesheet">
  <link href="https://xiongm.github.io/css/syntax.css" rel="stylesheet">
  <link href="https://xiongm.github.io/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>

  

  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://xiongm.github.io/">Cowboybebop's Notes</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="https://xiongm.github.io/">/home</a></li>
          <li><a href="https://xiongm.github.io/archive.html">/archive</a></li>
          <li><a href="https://xiongm.github.io/tags.html">/tags</a></li>
          <li><a href="https://xiongm.github.io/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="https://xiongm.github.io/2016/09/item-12-override-specifier-and-member-function-reference-specifiers">item 12 override specifier and member function reference specifiers</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>02 Sep 2016</time>
                </div>
                <ul>
                  
                    <li><a href="https://xiongm.github.io/tag/modernc++">modernc++</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <div id="toc" class="toc"></div>
                <p>Declare overriding virtual functions override, so if it doesn’t override anything, compiler will let you know.</p>

<p> </p>

<p>member function reference specifiers can limit use of member function to lvalues or rvalues only. This can be useful when you want lvalue to return lvalue and rvalue to return rvalue.</p>

<p>Consider the following code</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">Widget</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="k">using</span> <span class="n">DataType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">DataType</span> <span class="o">&amp;</span> <span class="n">data</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">data_</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
<span class="n">DataType</span> <span class="n">data_</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">....</span>
<span class="n">Widget</span> <span class="n">w</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">data</span> <span class="o">=</span> <span class="n">w</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="c1">// copy constructed, b/c w.data() is lvalue
</span><span class="p">....</span>
<span class="n">Widget</span> <span class="n">create_widget</span><span class="p">();</span>
<span class="k">auto</span> <span class="n">data</span> <span class="o">=</span> <span class="n">create_widget</span><span class="p">().</span><span class="n">data</span><span class="p">();</span> <span class="o">//</span> <span class="n">copy</span> <span class="n">constructed</span> <span class="n">as</span> <span class="n">well</span><span class="p">,</span> <span class="n">but</span> <span class="n">doesn</span><span class="err">'</span><span class="n">t</span> <span class="n">have</span> <span class="n">to</span> <span class="n">be</span></code></pre></figure>

<p>Now by introducing reference specifiers for data(), we can improve this.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">Widget</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="k">using</span> <span class="n">DataType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">DataType</span> <span class="n">data</span><span class="p">()</span> <span class="o">&amp;</span><span class="p">;</span> <span class="c1">// used only when (*this) is lvalue
</span><span class="p">{</span>
 <span class="k">return</span> <span class="n">data_</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">DataType</span> <span class="n">data</span><span class="p">()</span> <span class="o">&amp;&amp;</span><span class="p">;</span> <span class="c1">// used only when (*this) is rvalue
</span><span class="p">{</span>
  <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">data_</span><span class="p">);</span> <span class="c1">// because (*this) is a temp object!
</span><span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
<span class="n">DataType</span> <span class="n">data_</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="n">Widget</span> <span class="n">w</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">data</span> <span class="o">=</span> <span class="n">w</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="c1">// calls data() &amp; copy constructed
</span><span class="p">...</span>
<span class="n">Widget</span> <span class="n">create_widget</span><span class="p">();</span>
<span class="k">auto</span> <span class="n">data</span> <span class="o">=</span> <span class="n">create_widget</span><span class="p">().</span><span class="n">data</span><span class="p">();</span> <span class="o">//</span> <span class="n">calls</span> <span class="n">data</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">creates</span> <span class="n">a</span> <span class="n">rvalue</span><span class="p">,</span> <span class="n">so</span> <span class="n">move</span> <span class="n">constructed</span></code></pre></figure>


                

              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2016/09/item-22-when-using-the-pimpl-idiom-define-special-member-functions-in-the-implementation-file">Item 22: When using the Pimpl Idiom, define special member functions in the implementation file</a></li>
    
    <li><a href="/2016/09/item-21-prefer-stdmake_unique-and-stdmake_shared-to-direct-use-of-new">Item 21 Prefer std::make_unique and std::make_shared to direct use of new.</a></li>
    
    <li><a href="/2016/09/item-20-use-stdweak_ptr-for-stdshared_ptr-like-pointers-that-can-dangle">Item 20: Use std::weak_ptr for std::shared_ptr like pointers that can dangle</a></li>
    
    <li><a href="/2016/09/item-19-use-stdshared_ptr-for-shared-ownership-resource-management">Item 19: Use std::shared_ptr for shared-ownership resource management.</a></li>
    
    <li><a href="/2016/09/item-18-use-stdunique_ptr-for-exclusive-ownership-resource-management">Item 18: Use std::unique_ptr for exclusive-ownership resource management</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul>
    
      <li><a href="/tag/jekyll">jekyll</a></li>
    
      <li><a href="/tag/analytics">analytics</a></li>
    
      <li><a href="/tag/tags">tags</a></li>
    
      <li><a href="/tag/comments">comments</a></li>
    
      <li><a href="/tag/code">code</a></li>
    
      <li><a href="/tag/images">images</a></li>
    
      <li><a href="/tag/LeetCode">LeetCode</a></li>
    
      <li><a href="/tag/C++">C++</a></li>
    
      <li><a href="/tag/modernc++">modernc++</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    

  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Cowboybebop98 &copy; 2016</p>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="xiongm on Github" href="https://github.com/xiongm" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title=" on StackOverflow" href="http://stackoverflow.com/users/" target="_blank"><i class="fa fa-stack-overflow fa-2x"></i></a>
    </li>
  

  

  
    <li>
      <a title=" on Instagram" href="https://instagram.com/" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title=" on Last.fm" href="http://lastfm.com/user/" target="_blank"><i class="fa fa-lastfm fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="feed.xml RSS" href="/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>
  </body>
</html>

</div>
